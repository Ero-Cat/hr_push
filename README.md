# hr_push

一款用 Flutter 构建的跨平台心率推送/监控工具，面向想要快速查看、调试可穿戴心率设备广播与实时数据的个人开发者和硬件爱好者。

## 当前能力
- BLE 扫描与过滤：自动排除手机/PC 广播，优先关注常见心率穿戴（含 180D 服务或品牌关键词）。
- 连接与重连：记忆最近成功设备，掉线自动重连；支持手动快速连接/断开。
- 心率展示：解析心率广播/特征值，实时显示 BPM、更新时间与信号强度（RSSI）。
- 调试视图：展示附近广播的名称、RSSI、Service UUID 片段与厂家数据长度，便于排查配对问题。
- 跨端适配：桌面端固定竖屏窗口尺寸，确保 UI 与移动端一致；依赖 `flutter_blue_plus` 完成蓝牙功能。

## 平台与环境
- Flutter 3.10+，Dart 3.10+。
- 目标平台：Android / iOS / Windows / macOS / Linux（需蓝牙硬件支持）；当前不支持 Web，因为 `flutter_blue_plus` 尚未覆盖。
- iOS/macOS 需在系统授予蓝牙权限；Android 需开启蓝牙并授予扫描/连接（Android 12 及以上无需定位，11 及以下需定位权限）。

## 快速开始
1) 安装 Flutter 并启用目标平台（例如 `flutter config --enable-macos-desktop`）。
2) 获取依赖：`flutter pub get`。
3) iOS/macOS 如需 CocoaPods 依赖，进入 `ios` 或 `macos` 执行 `pod install`。
4) 运行：`flutter run -d <device>`，确保设备蓝牙已开启。

## 使用步骤
- 打开应用后授权蓝牙，等待自动扫描。
- 点击“重新扫描”可手动刷新列表；点击“快速连接”尝试连接最强信号的候选设备。
- 连接成功后将显示实时 BPM、更新时间和 RSSI；需要断开时点击“断开”。
- 若设备只广播心率而不支持连接，仍可在“广播调试”中观察数据与信号强度。

## 未来计划
- 数据留存与图表：本地存储近期心率并提供趋势曲线/导出 CSV。
- 阈值告警：心率过高/过低时发送系统通知或震动提醒（平台可用时）。
- 多设备管理：允许用户选择并保存多个常用设备的偏好顺序。
- 后台保持：在支持的平台上探索后台扫描/保持连接以减少手动操作。
- UI 打磨：可切换浅色主题、可配置刷新周期/自动重连策略。

## 目录结构速览
- `lib/main.dart`：界面与交互入口，含心率卡片、扫描控制、调试列表。
- `lib/heart_rate_manager.dart`：蓝牙扫描、过滤、连接、心率订阅与状态管理。
- `android/`、`ios/`、`macos/`、`windows/`：各平台工程与配置。

欢迎提出问题或改进建议，一起把 hr_push 打磨得更好。
